(()=>{"use strict";function e(){return JSON.parse(localStorage.getItem("tasks"))||[]}function t(e){localStorage.setItem("tasks",JSON.stringify(e))}const i=document.getElementById("add-tasks"),n=document.querySelector("dialog"),o=n.querySelector(".close-button"),r=n.querySelector(".submit-button"),a=document.getElementById("priority"),l=document.querySelector("#task-container");let d=e();class c{constructor(e,t,i,n,o){this.title=e,this.priority=t,this.dueDate=i,this.project=n,this.description=o}}function s(){l.textContent=""}const u=function(e){if("title"===e.target.parentNode.parentNode.className){const i=e.target.parentNode.parentNode.parentNode,n=e.target.parentNode.parentNode,o=i.id,r=i.querySelector("input"),a=r.value;if(""===a)return r.placeholder="REQUIRED FIELD",void(r.style.backgroundColor="white");n.innerHTML=`<span>${a}</span>\n        <div class="icon-holder">\n        <ion-icon id="edit" name="ellipsis-horizontal-outline" role="img" class="md hydrated"></ion-icon>\n        <ion-icon id="minimize" name="remove-outline" role="img" class="md hydrated"></ion-icon>\n        <ion-icon id="delete" name="close-outline" role="img" class="md hydrated"></ion-icon>\n        </div>`,d[o].title=a,t(d)}else if(e.target.parentNode.classList.contains("description")){const i=e.target.parentNode.parentNode,n=e.target.parentNode,o=i.id,r=i.querySelector("textarea"),a=r.value;if(""===a)return r.placeholder="REQUIRED FIELD",void(r.style.backgroundColor="firebrick");n.innerHTML=`<ion-icon id="edit" name="ellipsis-horizontal-outline" role="img" class="md hydrated"></ion-icon>\n                                        <p>${a}</p>`,d[o].description=a,t(d)}else{const i=e.target.parentNode.parentNode.id,n=e.target.parentNode,o=n.querySelector("h4"),r=n.querySelector("input"),a=r.value,l=r.id.slice(0,-4);if(""===a)return r.placeholder="REQUIRED FIELD",void(r.style.backgroundColor="firebrick");n.innerHTML=`<ion-icon id="edit" name="ellipsis-horizontal-outline"></ion-icon>\n                                <h4> ${o.innerHTML} ${a}  </h4>`,d[i][l]=a,t(d)}},p=function(e){let t,i,n,o;if(e.target.parentNode.parentNode.classList.contains("title"))t=e.target.parentNode.parentNode.parentNode.id,i=e.target.parentNode.parentNode,i.innerHTML=`<input type='text' style='width: 8rem; height: 80%; align-self: center' \n                                    id=titleEdit value=${d[t].title}>\n        <div class="icon-holder">\n        <ion-icon id='submit' name="enter-outline"></ion-icon>\n        <ion-icon id="minimize" name="remove-outline" role="img" class="md hydrated"></ion-icon>\n        <ion-icon id="delete" name="close-outline" role="img" class="md hydrated"></ion-icon>\n        </div>`;else if(t=e.target.parentNode.parentNode.id,i=e.target.parentNode,n=i.className,"description"!==n){o="project"===n?"text":"date";let e=i.querySelector("h4").textContent,r=Array.from(e),a=r.indexOf(":"),l=r.slice(0,a+1).join("");i.innerHTML=`<ion-icon id='submit' name="enter-outline"></ion-icon>\n        <input style="margin-right: .55rem; width: 7rem;" type=${o} id="${n}Edit" value=${d[t][n]}>\n        <h4> ${l} </h4>`}else i.innerHTML=`<ion-icon id='submit' name="enter-outline"></ion-icon>\n        <textarea id="descriptionEdit" name="descriptionEdit" rows="9" cols="30">${d[t].description}</textarea>`},m=function(e){let i=e.target.parentNode.parentNode.parentNode,n=i.id;i.classList.add("hide-display"),d.splice(n,1),t(d)},h=function(e){const t=e.target.name,i=e.target.parentNode.parentNode.parentNode;i.querySelector(".description").classList.toggle("hide-display"),i.classList.toggle("fit-content"),e.target.name="remove-outline"===t?"browsers-outline":"remove-outline"};function g(e){const t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("span"),o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("h4"),c=document.createElement("div"),s=document.createElement("h4"),u=document.createElement("div"),p=document.createElement("p");t.className="todo-card",t.id=d.indexOf(e),i.className="title",n.textContent=e.title,o.className="icon-holder",o.innerHTML='<ion-icon id="edit" name="ellipsis-horizontal-outline"></ion-icon>\n                                <ion-icon id=\'minimize\'name="remove-outline"></ion-icon>\n                                <ion-icon id=\'delete\' name="close-outline"></ion-icon>',"high"===e.priority&&(i.style.backgroundColor="firebrick"),"medium"===e.priority&&(i.style.backgroundColor="orange",i.style.color="black"),"low"===e.priority&&(i.style.backgroundColor="lightblue",i.style.color="black"),i.appendChild(n),i.appendChild(o),r.className="dueDate",a.textContent="Due: "+e.dueDate,r.innerHTML='<ion-icon id="edit" name="ellipsis-horizontal-outline"></ion-icon>',r.appendChild(a),c.className="project",s.textContent="Project: "+e.project,c.innerHTML='<ion-icon id="edit" name="ellipsis-horizontal-outline"></ion-icon>',c.appendChild(s),u.className="description",p.textContent=e.description,u.innerHTML='<ion-icon id="edit" name="ellipsis-horizontal-outline"></ion-icon>',u.appendChild(p),t.appendChild(i),t.appendChild(r),t.appendChild(c),t.appendChild(u),l.appendChild(t)}const y=document.querySelector("#sidebar"),f=new Set;let v,E=e();d.forEach((e=>g(e))),a.addEventListener("change",(function(e){const t=e.target.value,i=document.querySelectorAll(".priority-color");"high"===t&&i.forEach((e=>e.style.backgroundColor="firebrick")),"medium"===t&&i.forEach((e=>e.style.backgroundColor="orange")),"low"===t&&i.forEach((e=>e.style.backgroundColor="lightblue"))})),o.addEventListener("click",(()=>{n.close()})),i.addEventListener("click",(()=>{n.showModal()})),l.addEventListener("click",(function(e){"minimize"===e.target.id&&h(e),"delete"===e.target.id&&m(e),"edit"===e.target.id&&p(e),"submit"===e.target.id&&u(e)})),r.addEventListener("click",(function(e){let i=n.querySelector("#title"),o=n.querySelector("#dueDateForm"),r=n.querySelector("#projectName"),a=n.querySelector("#description"),l=n.querySelector("#priority"),s=o.value,u=new Date(s),p=(u.getMonth()+1).toString().padStart(2,"0"),m=u.getDate().toString().padStart(2,"0"),h=`${u.getFullYear()}-${p}-${m}`;if(""===i.value||""===r.value||""===o.value||""===a.value)return;e.preventDefault();let y=new c(i.value,l.value,h,r.value,a.value);d.push(y),n.close(),g(y),projectList.has(r.value)||showProjects(r.value),t(d)})),E.forEach((e=>f.add(e.project))),f.forEach((e=>function(e){const t=document.querySelector(".project-list-container"),i=document.createElement("h3");i.textContent=e,i.id=`${e}Sorter`,t.appendChild(i)}(e))),y.addEventListener("click",(function(e){const i=e.target,n=i.textContent;"H3"===i.tagName&&function(e){if("All Projects"===e)s(),E.forEach((e=>g(e)));else if("Due Date"===e)v?E.sort(((e,t)=>e.dueDate.localeCompare(t.dueDate))):E.sort(((e,t)=>t.dueDate.localeCompare(e.dueDate))),v=!v,s(),E.forEach((e=>g(e))),t(E);else if("Priority"===e){const e={high:3,medium:2,low:1};v?E.sort(((t,i)=>e[t.priority]-e[i.priority])):E.sort(((t,i)=>e[i.priority]-e[t.priority])),v=!v,s(),E.forEach((e=>g(e))),t(E)}else{let t=E.filter((t=>t.project===e));s(),t.forEach((e=>g(e)))}}(n)}))})();